version: '3.9'


services:
app:
build:
context: .
dockerfile: docker/php/Dockerfile
container_name: laravel_app
working_dir: /var/www
volumes:
- ./src:/var/www
depends_on:
- mysql
networks:
- laravel


nginx:
image: nginx:alpine
container_name: nginx
ports:
- "8080:80"
volumes:
- ./src:/var/www
- ./docker/nginx/default.conf:/etc/nginx/conf.d/default.conf
depends_on:
- app
networks:
- laravel


mysql:
image: mysql:8.0
container_name: mysql
restart: unless-stopped
environment:
MYSQL_DATABASE: laravel
MYSQL_USER: laravel
MYSQL_PASSWORD: laravel
MYSQL_ROOT_PASSWORD: root
ports:
- "3306:3306"
volumes:
- mysql_data:/var/lib/mysql
networks:
- laravel


volumes:
mysql_data:


networks:
laravel:
driver: bridge
